webpackJsonp([1],{"0ka3":function(t,e){},ABbq:function(t,e){},AfRi:function(t,e){},BNG3:function(t,e){},FxxJ:function(t,e){},LwfT:function(t,e){},MPzD:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("MVMM"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"headers"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item",{staticClass:"logo",attrs:{index:"1"}},[t._v("非工商数据采集平台")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("a",{attrs:{href:"/monitor2"}},[t._v("展示大屏")])]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("a",{attrs:{href:"/monitor2/warnings"}},[t._v("项目管理")])])],1)],1),t._v(" "),a("el-col",{attrs:{xs:3,sm:3,md:3,lg:3,xl:3}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("欢迎")])]),t._v(" "),a("el-col",{attrs:{xs:3,sm:3,md:3,lg:3,xl:3}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("注销")])])],1)],1)},staticRenderFns:[]};var s=a("Z0/y")({name:"headers"},r,!1,function(t){a("w1yz")},null,null).exports,l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[e("el-menu-item",{staticClass:"footer",attrs:{index:"1"}},[this._v("杭州有数金融信息服务有限公司  平台数据中心&征信事业部")])],1)],1)},staticRenderFns:[]};var o=a("Z0/y")({name:"footers"},l,!1,function(t){a("FxxJ")},null,null).exports,i={name:"App",components:{Headers:s,Footers:o}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("headers"),this._v(" "),e("router-view"),this._v(" "),e("footers")],1)},staticRenderFns:[]};var u=a("Z0/y")(i,c,!1,function(t){a("g1BB")},null,null).exports,p=a("zO6J"),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("Z0/y")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js"}}},d,!1,function(t){a("oJzG")},"data-v-dc3c27ac",null).exports;var v={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"nav"},[this._v("\n  有数采集平台\n")])},staticRenderFns:[]};var h=a("Z0/y")({name:"nav"},v,!1,function(t){a("ABbq")},"data-v-08ea406a",null).exports,m=a("HzJ8"),_=a.n(m),f={name:"scroll",props:["msg","items"],data:function(){return{animate:!1}},created:function(){setInterval(this.scroll,2500)},methods:{scroll:function(){var t=this;this.animate=!0,setTimeout(function(){t.items.push(t.items[0]),t.items.shift(),t.animate=!1},1500)}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"scroll"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:8,sm:12,md:12,lg:8,xl:12}},[a("div",{staticClass:"warning"},[t._v("\n        预警信息 "),a("span",[t._v(t._s(t.msg))])])]),t._v(" "),a("el-col",{attrs:{xs:16,sm:12,md:12,lg:16,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("ul",{ref:"con1",class:{anim:1==t.animate},attrs:{id:"con1"}},t._l(t.items,function(e){return a("li",[a("a",{attrs:{href:e.url,target:"_blank"}},[t._v("\n              "+t._s(e.name)+"\n            ")])])}))])])],1)],1)},staticRenderFns:[]};var b="http://10.1.1.62:1314",w={show_warning_crawl:b+"/monitor/show_warning_crawl",warning_crawl:b+"/monitor/warning_crawl"},x={name:"warning",data:function(){return{items:[],response:[]}},components:{Scroll:a("Z0/y")(f,g,!1,function(t){a("BNG3")},"data-v-b1dc4822",null).exports},methods:{getWarningsData:function(){var t=this;this.$axios.get(w.show_warning_crawl).then(function(e){t.response=e.data;var a=t.response.data,n=[],r=!0,s=!1,l=void 0;try{for(var o,i=_()(a);!(r=(o=i.next()).done);r=!0){var c=o.value,u=c.crawl.web_url;null!=u&&void 0!=u||(u="");var p={name:c.crawl.crawler_name,url:u};n.push(p)}}catch(t){s=!0,l=t}finally{try{!r&&i.return&&i.return()}finally{if(s)throw l}}t.items=n}).catch(function(t){console.log(t)})}},created:function(){this.getWarningsData()},mounted:function(){window.vue=this},computed:{msgs:{get:function(){return this.msgs=this.response.size},set:function(){}}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning"},[e("div",{staticClass:"container"},[e("scroll",{attrs:{msg:this.msgs,items:this.items}})],1)])},staticRenderFns:[]};var j={name:"home",components:{Nav:h,Warning:a("Z0/y")(x,y,!1,function(t){a("cKqy")},"data-v-995f74ca",null).exports}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("warning")],1)},staticRenderFns:[]};var C=a("Z0/y")(j,k,!1,function(t){a("ehag")},"data-v-4b18f2e8",null).exports,D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"table"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"300",border:""}},[t._l(t.columns,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("编辑")])]}}])})],2),t._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:1e3}})],1)},staticRenderFns:[]};var S=a("Z0/y")({name:"tables",props:["tableData","columns"],data:function(){return{msg:"这是假的吧"}},methods:{getMsg:function(t){}}},D,!1,function(t){a("QAIB")},null,null).exports,z={name:"project",data:function(){return{tableData:[{order:1,name:"信用浙江",project:"行政处罚",source:"信用浙江",charge:"张三",start_date:"2018-03-02",presume_counts:"330000",success_counts:"123444",deadline:"2018-04-01",average_count:"32231",update_count:"245",status:"报警"},{order:2,name:"信用浙江",project:"行政处罚",source:"信用浙江",charge:"张三",start_date:"2018-03-02",presume_counts:"330000",success_counts:"123444",deadline:"2018-04-01",average_count:"32231",update_count:"245",status:"报警"}],columns:[{prop:"order",label:"序号"},{prop:"name",label:"爬虫名称"},{prop:"project",label:"所属项目"},{prop:"source",label:"数据源"},{prop:"charge",label:"负责人"},{prop:"start_date",label:"起始日期"},{prop:"presume_counts",label:"预估总量"},{prop:"success_counts",label:"已爬数量"},{prop:"deadline",label:"预计完成日期"},{prop:"average_count",label:"日均更新量"},{prop:"update_count",label:"今日更新量"},{prop:"status",label:"状态"}]}},components:{Tables:S,Headers:s,Footers:o}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project"},[a("div",{staticClass:"title"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:16,sm:16,md:16,lg:16,xl:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("\n          爬虫一览\n        ")])]),t._v(" "),a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[t._v("\n          添加\n        ")])]),t._v(" "),a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-light"},[t._v("\n          上传文件\n        ")])])],1)],1),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入爬虫名称"},model:{value:t.input5,callback:function(e){t.input5=e},expression:"input5"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),t._v(" "),a("el-select",{attrs:{slot:"prepend",placeholder:"按项目选择"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"项目一",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"项目二",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"项目三",value:"3"}})],1),t._v(" "),a("el-select",{attrs:{slot:"prepend",placeholder:"按负责人选择"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"负责人一",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"负责人二",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"负责人三",value:"3"}})],1),t._v(" "),a("el-select",{attrs:{slot:"prepend",placeholder:"按状态选择"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"状态一",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"状态二",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"状态三",value:"3"}})],1)],1),t._v(" "),a("tables",{attrs:{tableData:t.tableData,columns:t.columns}})],1)},staticRenderFns:[]};var P=a("Z0/y")(z,E,!1,function(t){a("LwfT")},"data-v-77d03552",null).exports,F={name:"project",data:function(){return{tableData:[],datas:[],queryString:"",currentPage:1,pageSize:10,total:0,projects:[],crawler_name:"",project_name:"",owner:"",status:"",options:""}},methods:{handleSizeChange:function(t){this.pagination=t},handleIndexChange:function(t){this.pagination=t},cleanData:function(t){var e=this,a=[];return t.forEach(function(t,n){var r={};t.web_status;r.check_time=t.check_time.split(" ")[0],r.project_name=t.crawl.project_name,r.crawler_name=t.crawl.crawler_name,r.source=t.crawl.source,r.web_url=t.crawl.web_url,r.owner=t.crawl.crawl_owner;var s=new Date,l=(s-new Date(t.crawl_time))/1e3/60/60/24;if(""!=t.warn_time&&void 0!=t.warn_time)var o=(s-new Date(t.warn_time))/1e3/60/60/24;else o=1e4;var i,c,u,p,d,v=parseInt(Math.min(l,o));if(console.log(v),r.days=v,i=t.fail_count,null!=(c=t.pyspider)&&void 0!=c){var h=!0,m=!1,f=void 0;try{for(var g,b=_()(c);!(h=(g=b.next()).done);h=!0){var w=g.value;2===w.status?u=w.num:3===w.status?p=w.num:console.log("任务没启动")}}catch(t){m=!0,f=t}finally{try{!h&&b.return&&b.return()}finally{if(m)throw f}}}else u=0,p=0;d=(d=t.web_status)?"网站异常":e.getStatus(i,u,p),r.web_status=d,a.push(r)}),a},getWarningsData:function(t){var e=this;this.$axios.get(w.show_warning_crawl,{params:t}).then(function(t){var a=t.data.data;e.total=t.data.size;var n=e.cleanData(a);n.sort(function(t,e){return e.days-t.days}),n.forEach(function(t,e){t.id=e+1}),e.datas=n}).catch(function(t){console.log(t)})},updateData:function(t){this.project_name="请选择",this.owner="请选择",this.status="请选择",this.crawler_name=t},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t;this.currentPage;this.datas.filter(this.ismatch).slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},querySearchStatus:function(t){console.log(t)},getStatus:function(t,e,a){return t>0?"结构化异常":e+a<5||a/e>1?"爬虫异常":"断更"},handleClick:function(t){var e=this;console.log(t);var a=w.warning_crawl,n=new URLSearchParams;n.append("crawler_name",t.crawler_name),this.$axios({method:"post",url:a,data:n}).then(function(t){e.getWarningsData()}).catch(function(t){console.log(t)})},isDisabled:function(t){return 0!==t.days},createProjectFilter:function(t){return function(e){if(e===t)return e}},ismatch:function(t){if(""!=this.project_name&&"请选择"!=this.project_name){if(t.project_name==this.project_name)return this.crawler_name="",this.owner="请选择",this.status="请选择",t}else if(""!=this.crawler_name&&void 0!=this.crawler_name){if(-1!=t.crawler_name.indexOf(this.crawler_name))return t}else if(""!=this.owner&&"请选择"!=this.owner){if(t.owner==this.owner)return this.crawler_name="请选择",this.project_name="请选择",this.status="请选择",t}else{if(""==this.status||"请选择"==this.status)return t;if(t.web_status==this.status)return this.crawler_name="",this.project_name="请选择",this.owner="请选择",t}}},components:{Tables:S,Headers:s,Footers:o},created:function(){this.getWarningsData()},mounted:function(){window.vue=this},computed:{getTableData:function(){this.total=this.datas.filter(this.ismatch).length;var t=this.datas.filter(this.ismatch).slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize);return console.log(t),t},getProjects:function(){var t=[],e=[],a=[],n=[];return t.push({value:"请选择",label:"请选择"}),a.push({value:"请选择",label:"请选择"}),this.datas.forEach(function(r){var s={value:r.project_name,label:r.project_name},l={value:r.owner,label:r.owner};-1===e.indexOf(r.project_name)&&(e.push(r.project_name),t.push(s)),-1===n.indexOf(r.owner)&&(n.push(r.owner),a.push(l))}),{projects:t,owners:a,status:[{value:"请选择",label:"请选择"},{value:"网站异常",label:"网站异常"},{value:"结构化异常",label:"结构化异常"},{value:"爬虫异常",label:"爬虫异常"},{value:"断更",label:"断更"}]}}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project"},[a("div",{staticClass:"searchBox"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入爬虫名称",width:"100px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.updateData(t.queryString)}},model:{value:t.queryString,callback:function(e){t.queryString=e},expression:"queryString"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.updateData(t.queryString)}},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"select"},[a("el-select",{attrs:{placeholder:"按项目选择"},model:{value:t.project_name,callback:function(e){t.project_name=e},expression:"project_name"}},t._l(t.getProjects.projects,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{attrs:{placeholder:"按负责人选择"},model:{value:t.owner,callback:function(e){t.owner=e},expression:"owner"}},t._l(t.getProjects.owners,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{attrs:{placeholder:"按状态选择"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.getProjects.status,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.getTableData,options:t.options,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+1+(t.currentPage-1)*t.pageSize)+"  ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"project_name",label:"项目名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"crawler_name",label:"爬虫名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"source",label:"数据源"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.row.source,expression:"scope.row.source"}],attrs:{type:"text"}},[a("a",{attrs:{href:e.row.web_url,target:"_blank"}},[t._v(t._s(e.row.source))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"owner",width:"100",label:"负责人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"check_time",label:"预警时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"days",width:"150",label:"累计报警天数",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"web_status",label:"报警类型"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small",disabled:0===e.row.days},on:{click:function(a){t.handleClick(e.row)}}},[t._v("解除预警")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var R=a("Z0/y")(F,$,!1,function(t){a("AfRi")},"data-v-60e00410",null).exports;n.default.use(p.a);var B=new p.a({mode:"history",base:"/monitor2/",routes:[{path:"/",name:"Home",component:C},{path:"/projects",name:"Projects",component:P},{path:"/warnings",name:"Warnings",component:R}]}),T=a("dVeB"),q=a.n(T),Z=(a("0ka3"),a("aozt")),A=a.n(Z);a("MPzD");A.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n.default.prototype.$axios=A.a,n.default.config.productionTip=!1,n.default.use(q.a),new n.default({el:"#app",router:B,components:{App:u},template:"<App/>"})},QAIB:function(t,e){},cKqy:function(t,e){},ehag:function(t,e){},g1BB:function(t,e){},oJzG:function(t,e){},w1yz:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9f1f7fffb6bbfd89c095.js.map